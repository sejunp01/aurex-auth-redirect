<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Redirecting...</title>
    <script>
      window.onload = function () {
        const url = window.location.href;

        // 1) Supabase가 #fragment 로 토큰을 보내는 경우 → querystring 으로 변환
        if (url.includes("#")) {
          const newUrl = url.replace("#", "?");
          window.location.replace(newUrl);
          return;
        }

        // 2) 쿼리 파라미터 추출
        const params = new URLSearchParams(window.location.search);

        // 3) Expo Metro Bundler (LAN IP) 로 강제 redirect
        const expUrl =
          "exp://192.168.123.106:8081/--/auth?" + params.toString();

        // 실제 앱으로 이동
        window.location.replace(expUrl);
      };
    </script>
  </head>
  <body>
    <p>Redirecting to app...</p>
  </body>
</html>
