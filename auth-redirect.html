<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Redirecting...</title>
    <script>
      window.onload = function () {
        const url = window.location.href;

        // 1) #fragment â†’ ?query ë¡œ ë³€í™˜ (Supabaseê°€ í•´ì‹œë¡œ ì£¼ëŠ” ê²½ìš°)
        if (url.includes("#")) {
          const newUrl = url.replace("#", "?");
          window.location.replace(newUrl);
          return;
        }

        // 2) ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì¶”ì¶œ
        const params = new URLSearchParams(window.location.search);

        // 3) Expo ì•± ìŠ¤í‚´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (app.json ì— ì„¤ì •í•œ scheme ì‚¬ìš©!)
        const expUrl = "exp://127.0.0.1:8081/--/auth?" + params.toString();
        // ğŸ‘‰ ì‹¤ì œ ì•± ë°°í¬ì‹œì—ëŠ” "racketmatch://auth?" ê°™ì€ custom scheme ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•¨

        window.location.replace(expUrl);
      };
    </script>
  </head>
  <body>
    <p>Redirecting to app...</p>
  </body>
</html>
